!function(){const e={links:["ask.fm","askfm.im","askfm.su","askmes.ru","nekto.me","sprashivai.ru","sprashivaii.ru","sprashivalka.com","sprosi.name"].map(e=>`.wall_text [href*="${e}"]`).join(),apps:".wall_post_source_default",instagram:".wall_post_source_instagram",video:".wall_text .page_post_thumb_video",group_share:".page_group_share",mem_link:".mem_link[mention_id^='club']",event_share:".event_share",external_links:".wall_text [href^='/away.php?to=']:not(.wall_post_source_icon)",wall_post_more:".wall_post_more,.wall_copy_more",likes:".like.empty",comments:".comment.empty"};let t,o=document.querySelector("#feed_rows");function n([e,n]){o.querySelectorAll(n).map(e=>e.closest(".feed_row")).filter(Boolean).filter((function(e){return null===e.querySelector(".wall_text_name_explain_promoted_post, .ads_ads_news_wrap")})).forEach(o=>o.classList.toggle(`cffvk-${e}`,t[e]))}function s(){Object.entries(e).forEach(n),console.log("CFFVK: your feed has been cleaned")}function a(){o.querySelectorAll(".feed_row").forEach(e=>e.removeAttribute("style")),scroll(0,0)}NodeList.prototype.map=NodeList.prototype.map||Array.prototype.map;const r=new MutationObserver((function(e){0!==e[0].addedNodes.length&&(s(),console.log("             by the MutationObserver"))}));chrome.runtime.onMessage.addListener((function(e){if("clean"===e.action)return o=document.querySelector("#feed_rows"),r.disconnect(),r.observe(o,{childList:!0,subtree:!0}),document.querySelector("#feed_new_posts").addEventListener("click",a),t=e.settings,s();"disable"===e.action&&(r.disconnect(),console.log("CFFVK: cleaning disabled"))})),chrome.runtime.sendMessage({action:"activate"}),function(){let e=location.href;setInterval((function(){e!==location.href&&(e=location.href,chrome.runtime.sendMessage({action:"activate"}))}),100)}()}();