!function(){const e=["external_links","links","apps","instagram","video","group_share","mem_link","event_share","wall_post_more","likes","comments"].map((function(e){return`.cffvk-${e}`})).join(),t="[id^='feed_repost-'], [id^='feed_reposts_'] { display: none; }",n="[id^='post-'].post_copy { display: none; }",s="[id^='feed_repost'] { display: none; }",o=`${e} { display: none; }`,i=function(e){return e.replace(/none/g,"block")};let a={groups:!0,links:!0,apps:!0,group_share:!0,event_share:!0};function c(e){chrome.pageAction.setIcon({tabId:e,path:"disabled-icon16.png"}),chrome.tabs.insertCSS(e,{code:i(s+n+o)}),chrome.tabs.sendMessage(e,{action:"disable"})}function r(e){if(a["is-disabled"])return c(e);let r=i(s+n);a.groups&&(r=(a.people?s:i(s)+t)+(a.mygroups?n:i(n))),chrome.pageAction.setIcon({tabId:e,path:"icon16.png"}),chrome.tabs.insertCSS(e,{code:r+o}),chrome.tabs.sendMessage(e,{action:"clean",settings:a})}chrome.runtime.onMessage.addListener((function(e,t){if("execute"===e.action)return a=e.settings,r(e.tabId);"activate"===e.action&&function(e){if(!/\/feed\?[wz]=/.test(e.tab.url)){if(!e.tab.url.includes("vk.com/feed")||/photos|videos|articles|likes|notifications|comments|updates|replies/.test(e.tab.url))return chrome.pageAction.hide(e.tab.id),c(e.tab.id);chrome.storage.sync.get((function(t){Object.keys(t).length?a=t:chrome.storage.sync.set(a),r(e.tab.id)})),chrome.pageAction.show(e.tab.id)}}(t)}))}();